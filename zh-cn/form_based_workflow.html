<!DOCTYPE html>
<html lang="en">
<head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <title>Form-based Workflow | Laragon - portable, isolated, fast & powerful universal development environment for PHP, Node.js, Python, Java, Go, Ruby.</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="keywords" content="microservices, nodejs, javascript">
	<meta name="robots" content="index, follow">
  <!-- Canonical links -->
  <link rel="canonical" href="">
  <!-- Alternative links -->
  
    
      <link rel="alternative" hreflang="en" href="">
    
  
  <!-- Icon -->
  <link rel="apple-touch-icon" sizes="57x57" href="https://laragon.org/icon/apple-touch-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="114x114" href="https://laragon.org/icon/apple-touch-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="72x72" href="https://laragon.org/icon/apple-touch-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="144x144" href="https://laragon.org/icon/apple-touch-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="60x60" href="https://laragon.org/icon/apple-touch-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="120x120" href="https://laragon.org/icon/apple-touch-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="76x76" href="https://laragon.org/icon/apple-touch-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="152x152" href="https://laragon.org/icon/apple-touch-icon-152x152.png">
  <link rel="icon" type="image/png" href="https://laragon.org/icon/favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="https://laragon.org/icon/favicon-16x16.png" sizes="16x16">
  <link rel="icon" type="image/png" href="https://laragon.org/icon/favicon-32x32.png" sizes="32x32">
  <meta name="msapplication-TileColor" content="#2f83cd">
  <meta name="msapplication-TileImage" content="/icon/mstile-144x144.png">
  <!-- CSS -->
  <!-- build:css build/css/moleculer.css -->
  
<link rel="stylesheet" href="static/css/moleculer.css">

  <!-- endbuild -->
  <link href="static/css/css.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="static/css/font-awesome.min.css">
  <link rel="stylesheet" href="static/css/docsearch.min.css">
  <!-- RSS 
  <link rel="alternate" href="/atom.xml" title="Laragon - portable, isolated, fast & powerful universal development environment for PHP, Node.js, Python, Java, Go, Ruby.">
  -->
  <!-- Open Graph -->
  <meta name="description" content="We’ve created sample articles from the console, but that isn’t a viable long-term solution. The users of our app will expect to add content through a web interface. In this iteration we’ll create an H">
<meta property="og:type" content="website">
<meta property="og:title" content="Form-based Workflow">
<meta property="og:url" content="https://laragon.org/rails/form_based_workflow">
<meta property="og:site_name" content="Laragon - portable, isolated, fast &amp; powerful universal development environment for PHP, Node.js, Python, Java, Go, Ruby.">
<meta property="og:description" content="We’ve created sample articles from the console, but that isn’t a viable long-term solution. The users of our app will expect to add content through a web interface. In this iteration we’ll create an H">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2019-03-01T09:46:09.443Z">
<meta property="article:modified_time" content="2019-03-01T09:46:09.443Z">
<meta property="article:author" content="leokhoa">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="leovn">
  <!-- Google Analytics -->
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-617943-3', 'auto');
  ga('send', 'pageview');
</script>

  <!-- Github Button -->
  <script async="" defer="" src="static/js/buttons.js"></script>
</head>

<body>
  <div id="particles-js"></div>
  <header id="header" class="wrapper">
  <div id="header-inner" class="inner">
    <h1 id="logo-wrap">
      <a href="index.html" id="logo">Laragon</a>
    </h1>
    <nav id="main-nav">
      <a href="index1.html" class="main-nav-link">Docs</a>
	<!--
      <a href="https://github.com/leokhoa/laragon" target="_blank" rel="noopener" class="main-nav-link">Github</a>
      <div id="search-input-wrap" class="on">
        <div id="search-input-icon">
          <i class="fa fa-search"></i>
        </div>
        <input type="search" id="search-input" placeholder="Search...">
      </div>
	-->
	 <a href="index2.html" class="main-nav-link">Why Laragon?</a>
    <a href="index3.html" class="main-nav-link">Testimonials</a>
    <a href="index4.html" class="main-nav-link">Download</a>
    <a href="index5.html" class="main-nav-link">About</a>
    <a href="index6.html" target="_blank" rel="noopener" class="main-nav-link">Community</a>
    
   
    


    </nav>
    <div id="lang-select-wrap">
      <label id="lang-select-label"><i class="fa fa-globe"></i><span>English</span></label>
      <select id="lang-select" data-canonical="">
        
          <option value="en" selected="">English</option>
        
      </select>
    </div>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
      <span class="mobile-nav-toggle-bar"></span>
    </a>
  </div>
</header>

  <div id="container">
    <div id="content-wrap">
  <div id="content" class="wrapper">
    <div id="content-inner">
      <article class="article-container" itemscope="" itemtype="http://schema.org/Article">
        <div class="article-inner">
          <div class="article">
            <div class="inner">
              <header class="article-header">
                <h1 class="article-title" itemprop="name">Form-based Workflow</h1>
                <a href="javascript:;" target="_blank" rel="noopener" class="article-edit-link" title="Improve this doc"><i class="fa fa-pencil"></i></a>
              </header>
              <div class="article-content" itemprop="articleBody">
                <p>We’ve created sample articles from the console, but that isn’t a viable long-term solution. The users of our app will expect to add content through a web interface. In this iteration we’ll create an HTML form to submit the article, then all the backend processing to get it into the database.</p>
<h3 id="Creating-the-NEW-Action-and-View" class="article-heading"><a href="#Creating-the-NEW-Action-and-View" class="headerlink" title="Creating the NEW Action and View"></a>Creating the NEW Action and View<a class="article-anchor" href="#Creating-the-NEW-Action-and-View" aria-hidden="true"></a></h3><p>Previously, we set up the <code>resources :articles</code> route in <code>routes.rb</code>, and that told Rails that we were going to follow the RESTful conventions for this model named Article. Following this convention, the URL for creating a new article would be <a href="javascript:;" target="_blank" rel="external">http://localhost:3000/articles/new</a>. From the articles index, click your “Create a New Article” link and it should go to this path.</p>
<p>Then you’ll see an “Unknown Action” error. The router went looking for an action named <code>new</code> inside the <code>ArticlesController</code> and didn’t find it.</p>
<p>First let’s create that action. Open <code>app/controllers/articles_controller.rb</code> and add this method, making sure it’s <em>inside</em> the <code>ArticlesController</code> class, but <em>outside</em> the existing <code>index</code> and <code>show</code> methods:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">new</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h4 id="Starting-the-Template" class="article-heading"><a href="#Starting-the-Template" class="headerlink" title="Starting the Template"></a>Starting the Template<a class="article-anchor" href="#Starting-the-Template" aria-hidden="true"></a></h4><p>With that defined, refresh your browser and you should get the “Template is Missing” error.</p>
<p>Create a new file <code>app/views/articles/new.html.erb</code> with these contents:</p>
<figure class="highlight erb"><table><tr><td class="code"><pre><span class="line">&lt;h1&gt;Create a New Article&lt;/h1&gt;</span><br></pre></td></tr></table></figure>
<p>Refresh your browser and you should just see the heading “Create a New Article”.</p>
<h3 id="Writing-a-Form" class="article-heading"><a href="#Writing-a-Form" class="headerlink" title="Writing a Form"></a>Writing a Form<a class="article-anchor" href="#Writing-a-Form" aria-hidden="true"></a></h3><p>It’s not very impressive so far – we need to add a form to the <code>new.html.erb</code> so the user can enter in the article title and body. Because we’re following the RESTful conventions, Rails can take care of many of the details. Inside that <code>erb</code> file, enter this code below your header:</p>
<figure class="highlight erb"><table><tr><td class="code"><pre><span class="line">&lt;%=<span class="ruby"> form_for(@article) <span class="keyword">do</span> <span class="params">|f|</span> </span>%&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">  &lt;%<span class="ruby"> @article.errors.full_messages.each <span class="keyword">do</span> <span class="params">|error|</span> </span>%&gt;</span><br><span class="line">    &lt;li&gt;&lt;%=<span class="ruby"> error </span>%&gt;&lt;/li&gt;</span><br><span class="line">  &lt;%<span class="ruby"> <span class="keyword">end</span> </span>%&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    &lt;%=<span class="ruby"> f.label <span class="symbol">:title</span> </span>%&gt;&lt;br /&gt;</span><br><span class="line">    &lt;%=<span class="ruby"> f.text_field <span class="symbol">:title</span> </span>%&gt;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    &lt;%=<span class="ruby"> f.label <span class="symbol">:body</span> </span>%&gt;&lt;br /&gt;</span><br><span class="line">    &lt;%=<span class="ruby"> f.text_area <span class="symbol">:body</span> </span>%&gt;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    &lt;%=<span class="ruby"> f.submit </span>%&gt;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">&lt;%<span class="ruby"> <span class="keyword">end</span> </span>%&gt;</span><br></pre></td></tr></table></figure>
<p>What is all that?  Let’s look at it piece by piece:</p>
<ul>
<li><code>form_for</code> is a Rails helper method which takes one parameter, in this case <code>@article</code> and a block with the form fields. The first line basically says “Create a form for the object named <code>@article</code>, refer to the form by the name <code>f</code> and add the following elements to the form…”</li>
<li>The <code>f.label</code> helper creates an HTML label for a field. This is good usability practice and will have some other benefits for us later</li>
<li>The <code>f.text_field</code> helper creates a single-line text box named <code>title</code></li>
<li>The <code>f.text_area</code> helper creates a multi-line text box named <code>body</code></li>
<li>The <code>f.submit</code> helper creates a button labeled “Create”</li>
</ul>
<h4 id="Does-it-Work" class="article-heading"><a href="#Does-it-Work" class="headerlink" title="Does it Work?"></a>Does it Work?<a class="article-anchor" href="#Does-it-Work" aria-hidden="true"></a></h4><p>Refresh your browser and you’ll see this:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ArgumentError in Articles#new</span><br><span class="line">Showing C:/laragon/www/blogger/app/views/articles/new.html.erb where line #2 raised:</span><br><span class="line">First argument in form cannot contain nil or be empty</span><br></pre></td></tr></table></figure>
<p>Huh? We didn’t call a method <code>model_name</code>?</p>
<p>We didn’t <em>explicitly</em>, but the <code>model_name</code> method is called by <code>form_for</code>. What’s happening here is that we’re passing <code>@article</code> to <code>form_for</code>. Since we haven’t created an <code>@article</code> in this action, the variable just holds <code>nil</code>. The <code>form_for</code> method calls <code>model_name</code> on <code>nil</code>, generating the error above.</p>
<h4 id="Setting-up-for-Reflection" class="article-heading"><a href="#Setting-up-for-Reflection" class="headerlink" title="Setting up for Reflection"></a>Setting up for Reflection<a class="article-anchor" href="#Setting-up-for-Reflection" aria-hidden="true"></a></h4><p>Rails uses some of the <em>reflection</em> techniques that we talked about earlier in order to set up the form. Remember in the console when we called <code>Article.new</code> to see what fields an <code>Article</code> has? Rails wants to do the same thing, but we need to create the blank object for it. Go into your <code>articles_controller.rb</code>, and <em>inside</em> the <code>new</code> method, add this line:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">@article = Article.new</span><br></pre></td></tr></table></figure>
<p>Then refresh your browser and your form should come up. Enter in a title, some body text, and click <strong>Create Article</strong>.</p>
<h3 id="The-create-Action" class="article-heading"><a href="#The-create-Action" class="headerlink" title="The create Action"></a>The <code>create</code> Action<a class="article-anchor" href="#The-create-Action" aria-hidden="true"></a></h3><p>Your old friend pops up again…</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Unknown action</span><br><span class="line">The action &apos;create&apos; could not be found for ArticlesController</span><br></pre></td></tr></table></figure>
<p>We accessed the <code>new</code> action to load the form, but Rails’ interpretation of REST uses a second action named <code>create</code> to process the data from that form. Inside your <code>articles_controller.rb</code> add this method (again, <em>inside</em> the <code>ArticlesContoller</code> class, but <em>outside</em> the other methods):</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>Check the console’s output of <code>rail server</code> and you’ll see the “Template is Missing” error.<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Started POST &quot;/articles&quot; for 127.0.0.1 at 2017-06-29 08:33:25 +0000</span><br><span class="line">Processing by ArticlesController#create as HTML</span><br><span class="line">  Parameters: &#123;&quot;utf8&quot;=&gt;&quot;✓&quot;, &quot;authenticity_token&quot;=&gt;&quot;M963YLZDZcyPK+DBNIstpbJltZnwtr2YekPEknmhKBjWNykECZMQSKeGW2ym78o+5YGECq+2ZsUHDvcsaTRVnw==&quot;, &quot;article&quot;=&gt;&#123;&quot;title&quot;=&gt;&quot;Fourth Sample&quot;, &quot;body&quot;=&gt;&quot;This is my fourth sample article.&quot;&#125;, &quot;commit&quot;=&gt;&quot;Create Article&quot;&#125;</span><br><span class="line">No template found for ArticlesController#create, rendering head :no_content</span><br><span class="line">Completed 204 No Content in 401ms (ActiveRecord: 0.0ms)</span><br></pre></td></tr></table></figure></p>
<h4 id="We-Don’t-Always-Need-Templates" class="article-heading"><a href="#We-Don’t-Always-Need-Templates" class="headerlink" title="We Don’t Always Need Templates"></a>We Don’t Always Need Templates<a class="article-anchor" href="#We-Don’t-Always-Need-Templates" aria-hidden="true"></a></h4><p>When you click the “Create” button, what would you expect to happen? Most web applications would process the data submitted then show you the object. In this case, display the article.</p>
<p>We already have an action and template for displaying an article, the <code>show</code>, so there’s no sense in creating another template to do the same thing.</p>
<h4 id="Processing-the-Data" class="article-heading"><a href="#Processing-the-Data" class="headerlink" title="Processing the Data"></a>Processing the Data<a class="article-anchor" href="#Processing-the-Data" aria-hidden="true"></a></h4><p>Before we can send the client to the <code>show</code>, let’s process the data. The data from the form will be accesible through the <code>params</code> method.</p>
<p>To check out the structure and content of <code>params</code>, I like to use this trick:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create</span></span></span><br><span class="line">  fail</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>The <code>fail</code> method will halt the request allowing you to examine the request<br>parameters.</p>
<p>Refresh/resubmit the page in your browser.</p>
<h4 id="Understanding-Form-Parameters" class="article-heading"><a href="#Understanding-Form-Parameters" class="headerlink" title="Understanding Form Parameters"></a>Understanding Form Parameters<a class="article-anchor" href="#Understanding-Form-Parameters" aria-hidden="true"></a></h4><p>The page will say “RuntimeError”.</p>
<p>Below the error information is the request information. We are interested<br>in the parameters (I’ve inserted line breaks for readability):</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;&quot;utf8&quot;=&gt;&quot;✓&quot;,</span><br><span class="line"> &quot;authenticity_token&quot;=&gt;&quot;YR0R1oyoDj0dVwqIX4bK6Ldi9Ywp4A0rOTFAH+dlvOWE9I+yM3h7uTX6sSXN4i1z4IbEH3bg1nZEfHOh9/DBYg==&quot;,</span><br><span class="line"> &quot;article&quot;=&gt;&#123;&quot;title&quot;=&gt;&quot;Fourth Sample&quot;, &quot;body&quot;=&gt;&quot;This is my fourth sample article.&quot;&#125;,</span><br><span class="line"> &quot;commit&quot;=&gt;&quot;Create Article&quot;&#125;</span><br><span class="line">Toggle session dump</span><br></pre></td></tr></table></figure>
<p>What are all those? We see the <code>{</code> and <code>}</code> on the outside, representing a <code>Hash</code>. Within the hash we see keys:</p>
<ul>
<li><code>utf8</code> : This meaningless checkmark is a hack to force Internet Explorer to submit the form using UTF-8. <a href="javascript:;" target="_blank" rel="external">Read more on StackOverflow</a></li>
<li><code>authenticity_token</code> : Rails has some built-in security mechanisms to resist “cross-site request forgery”. Basically, this value proves that the client fetched the form from your site before submitting the data.</li>
<li><code>article</code> : Points to a nested hash with the data from the form itself<ul>
<li><code>title</code> : The title from the form</li>
<li><code>body</code> : The body from the form</li>
</ul>
</li>
<li><code>commit</code> : This key holds the text of the button they clicked. From the server side, clicking a “Save” or “Cancel” button looks exactly the same except for this parameter.</li>
<li><code>action</code> : Which controller action is being activated for this request</li>
<li><code>controller</code> : Which controller class is being activated for this request</li>
</ul>
<h4 id="Pulling-Out-Form-Data" class="article-heading"><a href="#Pulling-Out-Form-Data" class="headerlink" title="Pulling Out Form Data"></a>Pulling Out Form Data<a class="article-anchor" href="#Pulling-Out-Form-Data" aria-hidden="true"></a></h4><p>Now that we’ve seen the structure, we can access the form data to mimic the way<br>we created sample objects in the console. In the <code>create</code> action, remove the<br><code>fail</code> instruction and, instead, try this:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create</span></span></span><br><span class="line">  @article = Article.new</span><br><span class="line">  @article.title = params[<span class="symbol">:article</span>][<span class="symbol">:title</span>]</span><br><span class="line">  @article.save</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>If you check the console’s output of <code>rails server</code> you’ll still get the template error. Add one more line to the action, the redirect:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">redirect_to article_path(@article)</span><br></pre></td></tr></table></figure>
<p>Refresh the page and you should go to the show for your new article. (<em>NOTE</em>: You’ve now created the same sample article twice)</p>
<h4 id="More-Body" class="article-heading"><a href="#More-Body" class="headerlink" title="More Body"></a>More Body<a class="article-anchor" href="#More-Body" aria-hidden="true"></a></h4><p>The <code>show</code> page has the title, but where’s the body? Add a line to the <code>create</code> action to pull out the <code>:body</code> key from the <code>params</code> hash and store it into <code>@article</code>.</p>
<p>Then try it again in your browser. Both the <code>title</code> and <code>body</code> should show up properly.</p>
<h4 id="Fragile-Controllers" class="article-heading"><a href="#Fragile-Controllers" class="headerlink" title="Fragile Controllers"></a>Fragile Controllers<a class="article-anchor" href="#Fragile-Controllers" aria-hidden="true"></a></h4><p>Controllers are middlemen in the MVC framework. They should know as little as necessary about the other components to get the job done. This controller action knows too much about our model.</p>
<p>To clean it up, let me first show you a second way to create an instance of <code>Article</code>. You can call <code>new</code> and pass it a hash of attributes, like this:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create</span></span></span><br><span class="line">  @article = Article.new(</span><br><span class="line">    <span class="symbol">title:</span> params[<span class="symbol">:article</span>][<span class="symbol">:title</span>],</span><br><span class="line">    <span class="symbol">body:</span> params[<span class="symbol">:article</span>][<span class="symbol">:body</span>])</span><br><span class="line">  @article.save</span><br><span class="line">  redirect_to article_path(@article)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>Try that in your app, if you like, and it’ll work just fine.</p>
<p>But look at what we’re doing. <code>params</code> gives us back a hash, <code>params[:article]</code> gives us back the nested hash, and <code>params[:article][:title]</code> gives us the string from the form. We’re hopping into <code>params[:article]</code> to pull its data out and stick it right back into a hash with the same keys/structure.</p>
<p>There’s no point in that! Instead, just pass the whole hash:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create</span></span></span><br><span class="line">  @article = Article.new(params[<span class="symbol">:article</span>])</span><br><span class="line">  @article.save</span><br><span class="line">  redirect_to article_path(@article)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>Test and you’ll find that it… blows up! What gives?<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">ActiveModel::ForbiddenAttributesError in ArticlesController#create</span><br><span class="line">ActiveModel::ForbiddenAttributesError</span><br></pre></td></tr></table></figure></p>
<p>For security reasons, it’s not a good idea to blindly save parameters<br>sent into us via the params hash. Luckily, Rails gives us a feature<br>to deal with this situation: Strong Parameters.</p>
<p>It works like this: You use two new methods, <code>require</code> and <code>permit</code>.<br>They help you declare which attributes you’d like to accept. Add the below code to the bottom of your <code>articles_controller.rb</code>.</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">private</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">article_params</span></span></span><br><span class="line">  params.<span class="keyword">require</span>(<span class="symbol">:article</span>).permit(<span class="symbol">:title</span>, <span class="symbol">:body</span>)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>Now, you’ll then use this method instead of the <code>params</code> hash directly:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">@article = Article.new(article_params)</span><br></pre></td></tr></table></figure>
<p>Go ahead and add this helper method to your code, and change the arguments to <code>new</code>. It should look like this, in your articles_controller.rb file, when you’re done:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticlesController</span> &lt; ApplicationController</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#...</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">create</span></span></span><br><span class="line">    @article = Article.new(article_params)</span><br><span class="line">    @article.save</span><br><span class="line"></span><br><span class="line">    redirect_to article_path(@article)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">  private</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">article_params</span></span></span><br><span class="line">    params.<span class="keyword">require</span>(<span class="symbol">:article</span>).permit(<span class="symbol">:title</span>, <span class="symbol">:body</span>)</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>We can then re-use this method any other time we want to make an<br><code>Article</code>.</p>
<h3 id="Deleting-Articles" class="article-heading"><a href="#Deleting-Articles" class="headerlink" title="Deleting Articles"></a>Deleting Articles<a class="article-anchor" href="#Deleting-Articles" aria-hidden="true"></a></h3><p>We can create articles and we can display them, but when we eventually deliver this to less perfect people than us, they’re going to make mistakes. There’s no way to remove an article, let’s add that next.</p>
<p>We could put delete links on the index page, but instead let’s add them to the <code>show.html.erb</code> template. Let’s figure out how to create the link.</p>
<p>We’ll start with the <code>link_to</code> helper, and we want it to say the word “delete” on the link. So that’d be:</p>
<figure class="highlight erb"><table><tr><td class="code"><pre><span class="line">&lt;%=<span class="ruby"> link_to <span class="string">"delete"</span>, some_path </span>%&gt;</span><br></pre></td></tr></table></figure>
<p>But what should <code>some_path</code> be? Look at the routes table with <code>rake routes</code>. The <code>destroy</code> action will be the last row, but it has no name in the left column. In this table the names “trickle down,” so look up two lines and you’ll see the name <code>article</code>.</p>
<p>The helper method for the destroy-triggering route is <code>article_path</code>. It needs to know which article to delete since there’s an <code>:id</code> in the path, so our link will look like this:</p>
<figure class="highlight erb"><table><tr><td class="code"><pre><span class="line">&lt;%=<span class="ruby"> link_to <span class="string">"delete"</span>, article_path(@article) </span>%&gt;</span><br></pre></td></tr></table></figure>
<p>Go to your browser, load the show page, click the link, and observe what happens.</p>
<h4 id="REST-is-about-Path-and-Verb" class="article-heading"><a href="#REST-is-about-Path-and-Verb" class="headerlink" title="REST is about Path and Verb"></a>REST is about Path and Verb<a class="article-anchor" href="#REST-is-about-Path-and-Verb" aria-hidden="true"></a></h4><p>Why isn’t the article being deleted? If you look at the server’s console, this is the response to our link clicking:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Started GET &quot;/articles/6&quot; for 127.0.0.1 at 2017-06-29 09:05:24 +0000</span><br><span class="line">Processing by ArticlesController#show as HTML</span><br><span class="line">  Parameters: &#123;&quot;id&quot;=&gt;&quot;6&quot;&#125;</span><br><span class="line">  Article Load (0.0ms)  SELECT  &quot;articles&quot;.* FROM &quot;articles&quot; WHERE &quot;articles&quot;.&quot;id&quot; = ? LIMIT ?  [[&quot;id&quot;, 6], [&quot;LIMIT&quot;, 1]]</span><br><span class="line">  Rendering articles/show.html.erb within layouts/application</span><br><span class="line">  Rendered articles/show.html.erb within layouts/application (1.0ms)</span><br><span class="line">Completed 200 OK in 67ms (Views: 56.5ms | ActiveRecord: 0.0ms)</span><br></pre></td></tr></table></figure>
<p>Compare that to what we see in the routes table:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">DELETE /articles/:id(.:format)      articles#destroy</span><br></pre></td></tr></table></figure>
<p>The path <code>&quot;articles/3&quot;</code> matches the route pattern <code>articles/:id</code>, but look at the verb. The server is seeing a <code>GET</code> request, but the route needs a <code>DELETE</code> verb. How do we make our link trigger a <code>DELETE</code>?</p>
<p>You can’t, exactly. While most browsers support all four verbs, <code>GET</code>, <code>PUT</code>, <code>POST</code>, and <code>DELETE</code>, HTML links are always <code>GET</code>, and HTML forms only support <code>GET</code> and <code>POST</code>. So what are we to do?</p>
<p>Rails’ solution to this problem is to <em>fake</em> a <code>DELETE</code> verb. In your view template, you can add another attribute to the link like this:</p>
<figure class="highlight erb"><table><tr><td class="code"><pre><span class="line">&lt;%=<span class="ruby"> link_to <span class="string">"delete"</span>, article_path(@article), <span class="symbol">method:</span> <span class="symbol">:delete</span> </span>%&gt;</span><br></pre></td></tr></table></figure>
<p>Through some JavaScript tricks, Rails can now pretend that clicking this link triggers a <code>DELETE</code>. Try it in your browser.</p>
<h4 id="The-destroy-Action" class="article-heading"><a href="#The-destroy-Action" class="headerlink" title="The destroy Action"></a>The <code>destroy</code> Action<a class="article-anchor" href="#The-destroy-Action" aria-hidden="true"></a></h4><p>Now that the router is recognizing our click as a delete, we need the action. The HTTP verb is <code>DELETE</code>, but the Rails method is <code>destroy</code>, which is a bit confusing.</p>
<p>Let’s define the <code>destroy</code> method in our <code>ArticlesController</code> so it:</p>
<ol>
<li>Uses <code>params[:id]</code> to find the article in the database</li>
<li>Calls <code>.destroy</code> on that object</li>
<li>Redirects to the articles index page</li>
</ol>
<p><strong><em>— Do that now on your own and test it —</em></strong>.</p>
<h4 id="Confirming-Deletion" class="article-heading"><a href="#Confirming-Deletion" class="headerlink" title="Confirming Deletion"></a>Confirming Deletion<a class="article-anchor" href="#Confirming-Deletion" aria-hidden="true"></a></h4><p>There’s one more parameter you might want to add to your <code>link_to</code> call in your <code>show.html.erb</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="symbol">data:</span> &#123;<span class="symbol">confirm:</span> <span class="string">"Really delete the article?"</span>&#125;</span><br></pre></td></tr></table></figure>
<p>This will pop up a JavaScript dialog when the link is clicked. The Cancel button will stop the request, while the OK button will submit it for deletion.</p>
<h3 id="Creating-an-Edit-Action-amp-View" class="article-heading"><a href="#Creating-an-Edit-Action-amp-View" class="headerlink" title="Creating an Edit Action &amp; View"></a>Creating an Edit Action &amp; View<a class="article-anchor" href="#Creating-an-Edit-Action-amp-View" aria-hidden="true"></a></h3><p>Sometimes we don’t want to destroy an entire object, we just want to make some changes. We need an edit workflow.</p>
<p>In the same way that we used <code>new</code> to display the form and <code>create</code> to process that form’s data, we’ll use <code>edit</code> to display the edit form and <code>update</code> to save the changes.</p>
<h4 id="Adding-the-Edit-Link" class="article-heading"><a href="#Adding-the-Edit-Link" class="headerlink" title="Adding the Edit Link"></a>Adding the Edit Link<a class="article-anchor" href="#Adding-the-Edit-Link" aria-hidden="true"></a></h4><p>Again in <code>show.html.erb</code>, let’s add this:</p>
<figure class="highlight erb"><table><tr><td class="code"><pre><span class="line">&lt;%=<span class="ruby"> link_to <span class="string">"edit"</span>, edit_article_path(@article) </span>%&gt;</span><br></pre></td></tr></table></figure>
<p>Trigger the <code>edit_article</code> route and pass in the <code>@article</code> object. Try it!</p>
<h4 id="Implementing-the-edit-Action" class="article-heading"><a href="#Implementing-the-edit-Action" class="headerlink" title="Implementing the edit Action"></a>Implementing the <code>edit</code> Action<a class="article-anchor" href="#Implementing-the-edit-Action" aria-hidden="true"></a></h4><p>The router is expecting to find an action in <code>ArticlesController</code> named <code>edit</code>, so let’s add this:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">edit</span></span></span><br><span class="line">  @article = Article.find(params[<span class="symbol">:id</span>])</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>All the <code>edit</code> action does is find the object and display the form. Refresh and you’ll see the template missing error.</p>
<h4 id="An-Edit-Form" class="article-heading"><a href="#An-Edit-Form" class="headerlink" title="An Edit Form"></a>An Edit Form<a class="article-anchor" href="#An-Edit-Form" aria-hidden="true"></a></h4><p>Create a file <code>app/views/articles/edit.html.erb</code> but <em>hold on before you type anything</em>. Below is what the edit form would look like:</p>
<figure class="highlight erb"><table><tr><td class="code"><pre><span class="line">&lt;h1&gt;Edit an Article&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">&lt;%=<span class="ruby"> form_for(@article) <span class="keyword">do</span> <span class="params">|f|</span> </span>%&gt;</span><br><span class="line">  &lt;ul&gt;</span><br><span class="line">  &lt;%<span class="ruby"> @article.errors.full_messages.each <span class="keyword">do</span> <span class="params">|error|</span> </span>%&gt;</span><br><span class="line">    &lt;li&gt;&lt;%=<span class="ruby"> error </span>%&gt;&lt;/li&gt;</span><br><span class="line">  &lt;%<span class="ruby"> <span class="keyword">end</span> </span>%&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    &lt;%=<span class="ruby"> f.label <span class="symbol">:title</span> </span>%&gt;&lt;br /&gt;</span><br><span class="line">    &lt;%=<span class="ruby"> f.text_field <span class="symbol">:title</span> </span>%&gt;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    &lt;%=<span class="ruby"> f.label <span class="symbol">:body</span> </span>%&gt;&lt;br /&gt;</span><br><span class="line">    &lt;%=<span class="ruby"> f.text_area <span class="symbol">:body</span> </span>%&gt;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p&gt;</span><br><span class="line">    &lt;%=<span class="ruby"> f.submit </span>%&gt;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">&lt;%<span class="ruby"> <span class="keyword">end</span> </span>%&gt;</span><br></pre></td></tr></table></figure>
<p>In the Ruby community there is a mantra of “Don’t Repeat Yourself” – but that’s exactly what I’ve done here. This view is basically the same as the <code>new.html.erb</code> – the only change is the H1. We can abstract this form into a single file called a <em>partial</em>, then reference this partial from both <code>new.html.erb</code> and <code>edit.html.erb</code>.</p>
<h4 id="Creating-a-Form-Partial" class="article-heading"><a href="#Creating-a-Form-Partial" class="headerlink" title="Creating a Form Partial"></a>Creating a Form Partial<a class="article-anchor" href="#Creating-a-Form-Partial" aria-hidden="true"></a></h4><p>Partials are a way of packaging reusable view template code. We’ll pull the common parts out from the form into the partial, then render that partial from both the new template and the edit template.</p>
<p>Create a file <code>app/views/articles/_form.html.erb</code> and, yes, it has to have the underscore at the beginning of the filename. Partials always start with an underscore.</p>
<p>Open your <code>app/views/articles/new.html.erb</code> and CUT all the text from and including the <code>form_for</code> line all the way to its <code>end</code>. The only thing left will be your H1 line.</p>
<p>Add the following code to that view:</p>
<figure class="highlight erb"><table><tr><td class="code"><pre><span class="line">&lt;%=<span class="ruby"> render <span class="symbol">partial:</span> <span class="string">'form'</span> </span>%&gt;</span><br></pre></td></tr></table></figure>
<p>Now go back to the <code>_form.html.erb</code> and paste the code from your clipboard.</p>
<h4 id="Writing-the-Edit-Template" class="article-heading"><a href="#Writing-the-Edit-Template" class="headerlink" title="Writing the Edit Template"></a>Writing the Edit Template<a class="article-anchor" href="#Writing-the-Edit-Template" aria-hidden="true"></a></h4><p>Then look at your <code>edit.html.erb</code> file. You already have an H1 header, so add the line which renders the partial.</p>
<h4 id="Testing-the-Partial" class="article-heading"><a href="#Testing-the-Partial" class="headerlink" title="Testing the Partial"></a>Testing the Partial<a class="article-anchor" href="#Testing-the-Partial" aria-hidden="true"></a></h4><p>Go back to your articles list and try creating a new article – it should work just fine. Try editing an article and you should see the form with the existing article’s data – it works OK until you click “Update Article.”</p>
<h4 id="Implementing-Update" class="article-heading"><a href="#Implementing-Update" class="headerlink" title="Implementing Update"></a>Implementing Update<a class="article-anchor" href="#Implementing-Update" aria-hidden="true"></a></h4><p>The router is looking for an action named <code>update</code>. Just like the <code>new</code> action sends its form data to the <code>create</code> action, the <code>edit</code> action sends its form data to the <code>update</code> action. In fact, within our <code>articles_controller.rb</code>, the <code>update</code> method will look very similar to <code>create</code>:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update</span></span></span><br><span class="line">  @article = Article.find(params[<span class="symbol">:id</span>])</span><br><span class="line">  @article.update(article_params)</span><br><span class="line"></span><br><span class="line">  redirect_to article_path(@article)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>The only new bit here is the <code>update</code> method. It’s very similar to <code>Article.new</code> where you can pass in the hash of form data. It changes the values in the object to match the values submitted with the form. One difference from <code>new</code> is that <code>update</code> automatically saves the changes.</p>
<p>We use the same <code>article_params</code> method as before so that we only<br>update the attributes we’re allowed to.</p>
<p>Now try editing and saving some of your articles.</p>
<h3 id="Adding-a-flash-message" class="article-heading"><a href="#Adding-a-flash-message" class="headerlink" title="Adding a flash message"></a>Adding a flash message<a class="article-anchor" href="#Adding-a-flash-message" aria-hidden="true"></a></h3><p>Our operations are working, but it would be nice if we gave the user some kind of status message about what took place. When we create an article the message might say “Article ‘the-article-title’ was created”, or “Article ‘the-article-title’ was removed” for the remove action. We can accomplish this with the <code>flash</code> object.</p>
<p>The controller provides you with accessors to interact with the <code>flash</code> object. Calling <code>flash.notice</code> will fetch a value, and <code>flash.notice = &quot;Your Message&quot;</code> will store the string into it.</p>
<h4 id="Flash-for-Update" class="article-heading"><a href="#Flash-for-Update" class="headerlink" title="Flash for Update"></a>Flash for Update<a class="article-anchor" href="#Flash-for-Update" aria-hidden="true"></a></h4><p>Let’s look first at the <code>update</code> method we just worked on. It currently looks like this:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update</span></span></span><br><span class="line">  @article = Article.find(params[<span class="symbol">:id</span>])</span><br><span class="line">  @article.update(article_params)</span><br><span class="line"></span><br><span class="line">  redirect_to article_path(@article)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>We can add a flash message by inserting one line:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update</span></span></span><br><span class="line">  @article = Article.find(params[<span class="symbol">:id</span>])</span><br><span class="line">  @article.update(article_params)</span><br><span class="line"></span><br><span class="line">  flash.notice = <span class="string">"Article '<span class="subst">#&#123;@article.title&#125;</span>' Updated!"</span></span><br><span class="line"></span><br><span class="line">  redirect_to article_path(@article)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h4 id="Testing-the-flash-messages" class="article-heading"><a href="#Testing-the-flash-messages" class="headerlink" title="Testing the flash messages"></a>Testing the flash messages<a class="article-anchor" href="#Testing-the-flash-messages" aria-hidden="true"></a></h4><p>Try editing and saving an article through your browser. Does anything show up?</p>
<p>We need to add the flash messages to our view templates. The <code>update</code> method redirects to the <code>show</code>, so we <em>could</em> just add the display to our show template.</p>
<p>However, we will use the flash object in many actions of the application. Most of the time, it’s preferred to add it to our layout.</p>
<h4 id="Flash-messages-in-the-Layout" class="article-heading"><a href="#Flash-messages-in-the-Layout" class="headerlink" title="Flash messages in the Layout"></a>Flash messages in the Layout<a class="article-anchor" href="#Flash-messages-in-the-Layout" aria-hidden="true"></a></h4><p>If you look in <code>app/views/layouts/application.html.erb</code> you’ll find what is called the “application layout”. A layout is used to wrap multiple view templates in your application. You can create layouts specific to each controller, but most often we’ll just use one layout that wraps every view template in the application.</p>
<p>Looking at the default layout, you’ll see this:</p>
<figure class="highlight erb"><table><tr><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;title&gt;Blogger&lt;/title&gt;</span><br><span class="line">  &lt;%=<span class="ruby"> stylesheet_link_tag    <span class="string">"application"</span>, <span class="symbol">media:</span> <span class="string">"all"</span>, <span class="string">"data-turbolinks-track"</span> =&gt; <span class="literal">true</span> </span>%&gt;</span><br><span class="line">  &lt;%=<span class="ruby"> javascript_include_tag <span class="string">"application"</span>, <span class="string">"data-turbolinks-track"</span> =&gt; <span class="literal">true</span> </span>%&gt;</span><br><span class="line">  &lt;%=<span class="ruby"> csrf_meta_tags </span>%&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;%=<span class="ruby"> <span class="keyword">yield</span> </span>%&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p>The <code>yield</code> is where the view template content will be injected. Just <em>above</em> that yield, let’s display the flash message by adding this:</p>
<figure class="highlight erb"><table><tr><td class="code"><pre><span class="line">&lt;p class="flash"&gt;&lt;%=<span class="ruby"> flash.notice </span>%&gt;&lt;/p&gt;</span><br></pre></td></tr></table></figure>
<p>This outputs the value stored in the <code>flash</code> object in the attribute <code>:notice</code>.</p>
<h4 id="More-Flash-Message-Testing" class="article-heading"><a href="#More-Flash-Message-Testing" class="headerlink" title="More Flash Message Testing"></a>More Flash Message Testing<a class="article-anchor" href="#More-Flash-Message-Testing" aria-hidden="true"></a></h4><p>With the layout modified, try changing your article, clicking save, and you should see the flash message appear at the top of the <code>show</code> page.</p>
<h4 id="Adding-More-Messages" class="article-heading"><a href="#Adding-More-Messages" class="headerlink" title="Adding More Messages"></a>Adding More Messages<a class="article-anchor" href="#Adding-More-Messages" aria-hidden="true"></a></h4><p>Typical controllers will set flash messages in the <code>update</code>, <code>create</code>, and <code>destroy</code> actions. Insert messages into the latter two actions now.</p>
<p>Test out each action/flash messages, then you’re done with I1.</p>
<h3 id="An-Aside-on-the-Site-Root" class="article-heading"><a href="#An-Aside-on-the-Site-Root" class="headerlink" title="An Aside on the Site Root"></a>An Aside on the Site Root<a class="article-anchor" href="#An-Aside-on-the-Site-Root" aria-hidden="true"></a></h3><p>It’s annoying me that we keep going to <code>http://localhost:3000/</code> and seeing the Rails starter page. Let’s make the root show our articles index page.</p>
<p>Open <code>config/routes.rb</code> and right above the other routes (in this example, right above <code>resources :articles</code>) add in this one:</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">root <span class="symbol">to:</span> <span class="string">'articles#index'</span></span><br></pre></td></tr></table></figure>
<p>Now visit <code>http://localhost:3000</code> and you should see your article list.</p>
<h4 id="Another-Save-to-GitHub" class="article-heading"><a href="#Another-Save-to-GitHub" class="headerlink" title="Another Save to GitHub."></a>Another Save to GitHub.<a class="article-anchor" href="#Another-Save-to-GitHub" aria-hidden="true"></a></h4><p>The form-based workflow is complete, and it is common to commit and push changes after each feature. Go ahead and add/commit/push it up to GitHub:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git add -A</span><br><span class="line">git commit -m &quot;form-based workflow feature completed&quot;</span><br><span class="line">git push</span><br></pre></td></tr></table></figure>
<p>If you are not happy with the code changes you have implemented in this iteration, you don’t have to throw the whole project away and restart it.  You can use Git’s reset command to roll back to your first commit, and retry this iteration from there.  To do so, in your terminal, type in:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git log</span><br><span class="line">commit 15384dbc144d4cb99dc335ecb1d4608c29c46371</span><br><span class="line">Author: your_name your_email</span><br><span class="line">Date:   Thu Apr 11 11:02:57 2013 -0600</span><br><span class="line">    first blogger commit</span><br><span class="line">git reset --hard 15384dbc144d4cb99dc335ecb1d4608c29c46371</span><br></pre></td></tr></table></figure>

              </div>
              <footer class="article-footer">
                <time class="article-footer-updated" datetime="2019-03-01T09:46:09.443Z" itemprop="dateModified">Last updated: 2019-03-01</time>
                <a href="up_and_running.html" class="article-footer-prev" title="Up and Running"><i class="fa fa-chevron-left"></i><span>Prev</span></a><a href="adding_comments.html" class="article-footer-next" title="Adding Comments"><span>Next</span><i class="fa fa-chevron-right"></i></a>
              </footer>
              
            </div>
          </div>
          <aside id="article-toc" role="navigation">
            <div id="article-toc-inner">
              <strong class="sidebar-title">Contents</strong>
              <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Creating-the-NEW-Action-and-View"><span class="toc-text">Creating the NEW Action and View</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Starting-the-Template"><span class="toc-text">Starting the Template</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Writing-a-Form"><span class="toc-text">Writing a Form</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Does-it-Work"><span class="toc-text">Does it Work?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Setting-up-for-Reflection"><span class="toc-text">Setting up for Reflection</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#The-create-Action"><span class="toc-text">The create Action</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#We-Don’t-Always-Need-Templates"><span class="toc-text">We Don’t Always Need Templates</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Processing-the-Data"><span class="toc-text">Processing the Data</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Understanding-Form-Parameters"><span class="toc-text">Understanding Form Parameters</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Pulling-Out-Form-Data"><span class="toc-text">Pulling Out Form Data</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#More-Body"><span class="toc-text">More Body</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Fragile-Controllers"><span class="toc-text">Fragile Controllers</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Deleting-Articles"><span class="toc-text">Deleting Articles</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#REST-is-about-Path-and-Verb"><span class="toc-text">REST is about Path and Verb</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#The-destroy-Action"><span class="toc-text">The destroy Action</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Confirming-Deletion"><span class="toc-text">Confirming Deletion</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Creating-an-Edit-Action-amp-View"><span class="toc-text">Creating an Edit Action &amp; View</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Adding-the-Edit-Link"><span class="toc-text">Adding the Edit Link</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Implementing-the-edit-Action"><span class="toc-text">Implementing the edit Action</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#An-Edit-Form"><span class="toc-text">An Edit Form</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Creating-a-Form-Partial"><span class="toc-text">Creating a Form Partial</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Writing-the-Edit-Template"><span class="toc-text">Writing the Edit Template</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Testing-the-Partial"><span class="toc-text">Testing the Partial</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Implementing-Update"><span class="toc-text">Implementing Update</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Adding-a-flash-message"><span class="toc-text">Adding a flash message</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Flash-for-Update"><span class="toc-text">Flash for Update</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Testing-the-flash-messages"><span class="toc-text">Testing the flash messages</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Flash-messages-in-the-Layout"><span class="toc-text">Flash messages in the Layout</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#More-Flash-Message-Testing"><span class="toc-text">More Flash Message Testing</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Adding-More-Messages"><span class="toc-text">Adding More Messages</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#An-Aside-on-the-Site-Root"><span class="toc-text">An Aside on the Site Root</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Another-Save-to-GitHub"><span class="toc-text">Another Save to GitHub.</span></a></li></ol></li></ol>
              <a href="#" id="article-toc-top">Back to Top</a>
            </div>
          </aside>
        </div>
      </article>
      <aside id="sidebar" role="navigation">
  <div class="inner"><strong class="sidebar-title">Build a Blog with Ruby on Rails</strong><a href="environment_setup.html" class="sidebar-link">Environment Setup</a><a href="up_and_running.html" class="sidebar-link">Up and Running</a><a href="" class="sidebar-link current">Form-based Workflow</a><a href="adding_comments.html" class="sidebar-link">Adding Comments</a><a href="tagging.html" class="sidebar-link">Tagging</a><a href="a_few_gems.html" class="sidebar-link">A Few Gems</a><a href="authentication.html" class="sidebar-link">Authentication</a><a href="extras.html" class="sidebar-link">Extras</a></div>
</aside>
    </div>
  </div>
</div>

    <footer id="footer" class="wrapper">
  <div class="inner">
    <div id="footer-copyright">
      Copyright &copy; 2020 - <a href="javascript:;" target="_blank">leokhoa</a><br>
    </div>
    <div id="footer-links">
      <a href="javascript:;" class="footer-link" target="_blank"><i class="fa fa-twitter"></i></a>
      <a href="javascript:;" class="footer-link" target="_blank"><i class="fa fa-github-alt"></i></a>
    </div>
  </div>
</footer>

  </div>
  <div id="mobile-nav-dimmer"></div>
  <nav id="mobile-nav">
  <div id="mobile-nav-inner">
    <ul id="mobile-nav-list">
      <a href="index1.html" class="mobile-nav-link">Docs</a>
      <li class="mobile-nav-item">
        <a href="javascript:;" class="mobile-nav-link" rel="external" target="_blank">GitHub</a>
      </li>
    </ul>
    
      <strong class="mobile-nav-title">Build a Blog with Ruby on Rails</strong><a href="environment_setup.html" class="mobile-nav-link">Environment Setup</a><a href="up_and_running.html" class="mobile-nav-link">Up and Running</a><a href="" class="mobile-nav-link current">Form-based Workflow</a><a href="adding_comments.html" class="mobile-nav-link">Adding Comments</a><a href="tagging.html" class="mobile-nav-link">Tagging</a><a href="a_few_gems.html" class="mobile-nav-link">A Few Gems</a><a href="authentication.html" class="mobile-nav-link">Authentication</a><a href="extras.html" class="mobile-nav-link">Extras</a>
    
  </div>
  <div id="mobile-lang-select-wrap">
    <span id="mobile-lang-select-label"><i class="fa fa-globe"></i><span>English</span></span>
    <select id="mobile-lang-select" data-canonical="">
      
        <option value="en" selected="">English</option>
      
    </select>
  </div>
</nav>
  <!-- Scripts -->
<!-- build:js build/js/main.js -->

<script src="static/js/lang_select.js"></script>


<script src="static/js/scrollingelement.js"></script>


<script src="static/js/toc.js"></script>


<script src="static/js/mobile_nav.js"></script>

<!-- endbuild -->
<script src="static/js/retina.min.js" async=""></script>

<!-- Algolia -->


<!-- Particles -->

<script src="static/js/particles.js"></script>


<script type="text/javascript">
particlesJS("particles-js", {
  "particles": {
    "number": {
      "value": 60,
      "density": {
        "enable": true,
        "value_area": 800
      }
    },
    "color": {
      "value": "#ffffff"
    },
    "shape": {
      "type": "circle",
      "stroke": {
        "width": 0,
        "color": "#000000"
      },
      "polygon": {
        "nb_sides": 5
      },
      "image": {
        "src": "img/github.svg",
        "width": 100,
        "height": 100
      }
    },
    "opacity": {
      "value": 0.1,
      "random": false,
      "anim": {
        "enable": false,
        "speed": 1,
        "opacity_min": 0.1,
        "sync": false
      }
    },
    "size": {
      "value": 6,
      "random": false,
      "anim": {
        "enable": false,
        "speed": 40,
        "size_min": 0.1,
        "sync": false
      }
    },
    "line_linked": {
      "enable": true,
      "distance": 150,
      "color": "#ffffff",
      "opacity": 0.1,
      "width": 2
    },
    "move": {
      "enable": true,
      "speed": 1.5,
      "direction": "top",
      "random": false,
      "straight": false,
      "out_mode": "out",
      "bounce": false,
      "attract": {
        "enable": false,
        "rotateX": 600,
        "rotateY": 1200
      }
    }
  },
  "interactivity": {
    "detect_on": "canvas",
    "events": {
      "onhover": {
        "enable": false,
        "mode": "repulse"
      },
      "onclick": {
        "enable": false,
        "mode": "push"
      },
      "resize": true
    },
    "modes": {
      "grab": {
        "distance": 400,
        "line_linked": {
          "opacity": 1
        }
      },
      "bubble": {
        "distance": 400,
        "size": 40,
        "duration": 2,
        "opacity": 8,
        "speed": 3
      },
      "repulse": {
        "distance": 200,
        "duration": 0.4
      },
      "push": {
        "particles_nb": 4
      },
      "remove": {
        "particles_nb": 2
      }
    }
  },
  "retina_detect": true
});
</script>

<!-- fastclick -->
<script src="static/js/fastclick.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  FastClick.attach(document.body)
}, false)
</script>



</body>
</html>